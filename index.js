(function(E,A,y,f,e,g,k,P,b,V){"use strict";const D=f.findByStoreName("ThemeStore");f.findByProps("triggerHaptic");const B=f.findByProps("colors","unsafe_rawColors"),F=B?.internal??B?.meta,H=f.findByProps("TextStyleSheet").TextStyleSheet;f.findByName("Navigator")??f.findByProps("Navigator")?.Navigator,f.findByProps("getRenderCloseButton")?.getRenderCloseButton??f.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,f.findByProps("popModal","pushModal");const U=function(n,a){return D.theme!=="light"?n:a},M=function(n,a,o){const d=function(i){return i.match(/\w\w/g)?.map(function(c){return parseInt(c,16)})??[0,0,0]},t=function(i){return`#${i.map(function(c){return c.toString(16).padStart(2,"0")}).join("")}`},s=d(n),l=d(a),r=s.map(function(i,c){return Math.round(i+(l[c]-i)*o)});return t(r)};function O(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D.theme;return F.resolveSemanticColor(a,n)}function w(n){let{variant:a,lineClamp:o,color:d,align:t,style:s,onPress:l,getChildren:r,children:i,liveUpdate:c}=n;const[h,R]=e.React.useReducer(function(u){return~u},0);return e.React.useEffect(function(){if(!c)return;const u=new Date().setMilliseconds(1e3);let C;const S=setTimeout(function(){R(),C=setInterval(R,1e3)},u-Date.now());return function(){clearTimeout(S),clearInterval(C)}},[]),e.React.createElement(e.ReactNative.Text,{style:[a?H[a]:{},d?{color:O(g.semanticColors[d])}:{},t?{textAlign:t}:{},s??{}],numberOfLines:o,onPress:l},r?.()??i)}const m=e.ReactNative.Animated.createAnimatedComponent(e.ReactNative.Pressable);function G(n){let{label:a,color:o,disabled:d,loading:t,onPress:s}=n;const l={BRAND:g.rawColors.BRAND_500,DANGER:g.rawColors.RED_500,POSITIVE:g.rawColors.GREEN_500,PRIMARAY:g.rawColors.PRIMARY_500,NORMAL:g.rawColors.PRIMARY_500}[o],r=U(M(l,"#FFFFFF",.25),M(l,"#000000",.15)),i=e.stylesheet.createThemedStyleSheet({container:{alignItems:"baseline",paddingHorizontal:12,paddingVertical:10,borderRadius:2147483647},inactive:{backgroundColor:`${r}00`},active:{backgroundColor:`${r}14`}}),c=!t&&!d,[h,R]=e.React.useState(!1),u=e.React.useRef(new e.ReactNative.Animated.Value(h?1:0)).current;return e.React.useEffect(function(){e.ReactNative.Animated.timing(u,{toValue:h?1:0,duration:100,easing:e.ReactNative.Easing.linear,useNativeDriver:!0}).start()},[h]),e.React.createElement(m,{style:[i.container,c&&{backgroundColor:u.interpolate({inputRange:[0,1],outputRange:[i.inactive.backgroundColor,i.active.backgroundColor]})}],onPressIn:function(){return R(!0)},onPressOut:function(){return R(!1)},onPress:function(){return c&&s?.()},accessibilityRole:"button",accessibilityState:{disabled:!c},accessible:c,collapsable:!1,disabled:!c,pointerEvents:c?"box-only":"none"},t?e.React.createElement(e.ReactNative.ActivityIndicator,{size:"small",color:O(g.semanticColors[`TEXT_${o}`])}):e.React.createElement(w,{variant:"text-md/semibold",color:c?`TEXT_${o}`:"TEXT_MUTED"},a))}const z=f.findByProps("openLazy","close");function Y(n){let{title:a,body:o,children:d,confirmColor:t,confirmText:s,onConfirm:l,isConfirmButtonDisabled:r,cancelText:i,onCancel:c,secondaryConfirmText:h,onConfirmSecondary:R}=n;const u=r!==void 0,[C,S]=e.React.useState({confirm:!1,cancel:!1,secondaryConfirm:!1}),I=e.stylesheet.createThemedStyleSheet({container:{backgroundColor:g.semanticColors.CARD_PRIMARY_BG,borderRadius:28,flexDirection:"column",width:e.ReactNative.Dimensions.get("window").width*.85},textContent:{width:"100%",flexDirection:"column",gap:16,paddingHorizontal:24,paddingTop:24},actions:{width:"100%",flexDirection:"row-reverse",flexWrap:"wrap",gap:8,paddingLeft:8,marginRight:-24,paddingVertical:24}}),x=Symbol("empty"),ne=[{color:{brand:"BRAND",red:"DANGER",green:"POSITIVE",primary:"PRIMARY",transparent:"NORMAL",grey:"NORMAL",lightgrey:"NORMAL",white:"NORMAL",link:"NORMAL"}[t]??"BRAND",text:s??"Confirm",action:l,base:!0,loading:"confirm"},i?{color:"BRAND",text:i,action:c,base:!1,loading:"cancel"}:x,h?{color:"BRAND",text:h,action:R,base:!1,loading:"secondaryConfirm"}:x].filter(function(p){return p!==x});return e.React.createElement(e.ReactNative.View,{style:I.container},e.React.createElement(e.ReactNative.View,{style:I.textContent},e.React.createElement(w,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},a),d?e.React.createElement(e.ReactNative.View,{style:{padding:0}},d):e.React.createElement(w,{variant:"text-md/semibold",color:"TEXT_NORMAL"},o)),e.React.createElement(e.ReactNative.View,{style:I.actions},ne.map(function(p){return e.React.createElement(G,{color:p.color,label:p.text,disabled:p.base&&r,loading:C[p.loading],onPress:async function(){S({...C,[p.loading]:!0}),"action"in p&&u?(await p.action().catch(function(){}),S({...C,[p.loading]:!1})):(p.action?.(),z.close())}})})))}const{Stack:_,TextInput:X,ScrollView:j}=b.Forms,{Button:N}=b.General;function K(n){let{initialValue:a="",onConfirm:o,title:d}=n;const[t,s]=e.React.useState(a),[l,r]=e.React.useState(""),[i,c]=e.React.useState(!1),h=function(u){return/^\d+$/.test(u)};function R(){if(!h(t)){r("Please enter a valid Discord User ID (numbers only)");return}c(!0),o(t),c(!1)}return e.React.createElement(Y,{onConfirm:R,title:d},e.React.createElement(_,{style:{marginTop:-12}},e.React.createElement(X,{autoFocus:!0,isClearable:!0,value:t,onChange:function(u){s(u),l&&r("")},returnKeyType:"done",onSubmitEditing:R,state:l?"error":void 0,errorMessage:l||void 0,keyboardType:"numeric"}),e.React.createElement(j,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:{gap:8}},e.React.createElement(N,{size:"sm",variant:"tertiary",text:"Import from clipboard",icon:P.getAssetIDByName("ic_clipboard"),onPress:function(){return e.clipboard.getString().then(function(u){return s(u)})}}))),e.React.createElement(_,null,e.React.createElement(N,{loading:i,text:"Confirm",variant:"primary",disabled:!t,onPress:R}),e.React.createElement(N,{disabled:i,text:"Cancel",variant:"secondary"})))}const{openLazy:W,hideActionSheet:re}=f.findByProps("openLazy","hideActionSheet");function T(n,a){try{W(new Promise(function(o){return o({default:n})}),"ActionSheet",a)}catch(o){A.logger.error(o.stack),V.showToast("Got error when opening ActionSheet! Please check debug logs")}}const v={toInt(n){return n=n.replace(/^#/,""),parseInt(n,16)},toHex(n){return"#"+n.toString(16).toUpperCase()},HSLtoHEX(n,a,o){o/=100;const d=a*Math.min(o,1-o)/100,t=function(s){const l=(s+n/30)%12,r=o-d*Math.max(Math.min(l-3,9-l,1),-1);return Math.round(255*r).toString(16).padStart(2,"0")};return`#${t(0)}${t(8)}${t(4)}`}},{FormText:ae,FormInput:oe,FormRow:q}=b.Forms,{Button:ie,View:J,TouchableOpacity:Q,Image:Z}=b.General;f.findByProps("pushModal","popModal");const L=f.findByName("CustomColorPickerActionSheet");function ee(){const[n,a]=e.React.useState(y.storage.colors?.entries||[]),o=function(t,s){T(K,{title:"Edit User ID",initialValue:t.userId,onConfirm:function(l){const r=[...n];r[s]={...t,userId:l},y.storage.colors={entries:r},a(r),g.toasts.showToast("User ID updated!")}})},d=function(){k.showInputAlert({title:"Enter User ID",confirmText:"Save",cancelText:"Cancel",placeholder:"Type here...",onConfirm:function(t){T(L,{color:v.toInt("#000000"),title:"Select Color",onSelect:function(s){const l=v.toHex(s),r=[...n,{userId:t,color:l}];y.storage.colors={entries:r},a(r),g.toasts.showToast("Color entry added!")}})}})};return e.React.createElement(e.React.Fragment,null,n.map(function(t,s){return e.React.createElement(q,{key:s,label:`User ID: ${t.userId}`,subLabel:"Tap to change color",onPress:function(){T(L,{color:v.toInt(t.color),title:"Select Color",onSelect:function(l){const r=v.toHex(l),i=[...n];i[s]={...t,color:r},y.storage.colors={entries:i},a(i),g.toasts.showToast("Color updated!")}})},onLongPress:function(){return o(t,s)},trailing:e.React.createElement(J,{style:{width:24,height:24,borderRadius:12,backgroundColor:t.color,borderWidth:1,borderColor:g.semanticColors.BACKGROUND_SECONDARY}})})}),e.React.createElement(Q,{style:$.fab,onPress:d},e.React.createElement(Z,{source:P.getAssetIDByName("ic_add_24px"),style:$.fabIcon})))}const $=e.stylesheet.createThemedStyleSheet({fab:{position:"absolute",bottom:20,right:20,backgroundColor:g.semanticColors.BACKGROUND_SECONDARY,borderRadius:50,width:56,height:56,justifyContent:"center",alignItems:"center",elevation:6},fabIcon:{width:24,height:24,tintColor:"white"}});var te={onLoad:function(){y.storage.colors=y.storage.colors??{entries:[]},A.logger.log("Hello world!")},onUnload:function(){A.logger.log("Goodbye, world.")},settings:ee};return E.default=te,Object.defineProperty(E,"__esModule",{value:!0}),E})({},vendetta,vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts);
