(function(E,A,y,f,e,g,k,P,b,F){"use strict";const D=f.findByStoreName("ThemeStore");f.findByProps("triggerHaptic");const B=f.findByProps("colors","unsafe_rawColors"),V=B?.internal??B?.meta,m=f.findByProps("TextStyleSheet").TextStyleSheet;f.findByName("Navigator")??f.findByProps("Navigator")?.Navigator,f.findByProps("getRenderCloseButton")?.getRenderCloseButton??f.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,f.findByProps("popModal","pushModal");const H=function(t,i){return D.theme!=="light"?t:i},M=function(t,i,o){const r=function(c){return c.match(/\w\w/g)?.map(function(l){return parseInt(l,16)})??[0,0,0]},n=function(c){return`#${c.map(function(l){return l.toString(16).padStart(2,"0")}).join("")}`},s=r(t),a=r(i),d=s.map(function(c,l){return Math.round(c+(a[l]-c)*o)});return n(d)};function O(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D.theme;return V.resolveSemanticColor(i,t)}function w(t){let{variant:i,lineClamp:o,color:r,align:n,style:s,onPress:a,getChildren:d,children:c,liveUpdate:l}=t;const[h,R]=e.React.useReducer(function(u){return~u},0);return e.React.useEffect(function(){if(!l)return;const u=new Date().setMilliseconds(1e3);let C;const S=setTimeout(function(){R(),C=setInterval(R,1e3)},u-Date.now());return function(){clearTimeout(S),clearInterval(C)}},[]),e.React.createElement(e.ReactNative.Text,{style:[i?m[i]:{},r?{color:O(g.semanticColors[r])}:{},n?{textAlign:n}:{},s??{}],numberOfLines:o,onPress:a},d?.()??c)}const U=e.ReactNative.Animated.createAnimatedComponent(e.ReactNative.Pressable);function G(t){let{label:i,color:o,disabled:r,loading:n,onPress:s}=t;const a={BRAND:g.rawColors.BRAND_500,DANGER:g.rawColors.RED_500,POSITIVE:g.rawColors.GREEN_500,PRIMARAY:g.rawColors.PRIMARY_500,NORMAL:g.rawColors.PRIMARY_500}[o],d=H(M(a,"#FFFFFF",.25),M(a,"#000000",.15)),c=e.stylesheet.createThemedStyleSheet({container:{alignItems:"baseline",paddingHorizontal:12,paddingVertical:10,borderRadius:2147483647},inactive:{backgroundColor:`${d}00`},active:{backgroundColor:`${d}14`}}),l=!n&&!r,[h,R]=e.React.useState(!1),u=e.React.useRef(new e.ReactNative.Animated.Value(h?1:0)).current;return e.React.useEffect(function(){e.ReactNative.Animated.timing(u,{toValue:h?1:0,duration:100,easing:e.ReactNative.Easing.linear,useNativeDriver:!0}).start()},[h]),e.React.createElement(U,{style:[c.container,l&&{backgroundColor:u.interpolate({inputRange:[0,1],outputRange:[c.inactive.backgroundColor,c.active.backgroundColor]})}],onPressIn:function(){return R(!0)},onPressOut:function(){return R(!1)},onPress:function(){return l&&s?.()},accessibilityRole:"button",accessibilityState:{disabled:!l},accessible:l,collapsable:!1,disabled:!l,pointerEvents:l?"box-only":"none"},n?e.React.createElement(e.ReactNative.ActivityIndicator,{size:"small",color:O(g.semanticColors[`TEXT_${o}`])}):e.React.createElement(w,{variant:"text-md/semibold",color:l?`TEXT_${o}`:"TEXT_MUTED"},i))}const z=f.findByProps("openLazy","close");function Y(t){let{title:i,body:o,children:r,confirmColor:n,confirmText:s,onConfirm:a,isConfirmButtonDisabled:d,cancelText:c,onCancel:l,secondaryConfirmText:h,onConfirmSecondary:R}=t;const u=d!==void 0,[C,S]=e.React.useState({confirm:!1,cancel:!1,secondaryConfirm:!1}),I=e.stylesheet.createThemedStyleSheet({container:{backgroundColor:g.semanticColors.CARD_PRIMARY_BG,borderRadius:28,flexDirection:"column",width:e.ReactNative.Dimensions.get("window").width*.85},textContent:{width:"100%",flexDirection:"column",gap:16,paddingHorizontal:24,paddingTop:24},actions:{width:"100%",flexDirection:"row-reverse",flexWrap:"wrap",gap:8,paddingLeft:8,marginRight:-24,paddingVertical:24}}),x=Symbol("empty"),ne=[{color:{brand:"BRAND",red:"DANGER",green:"POSITIVE",primary:"PRIMARY",transparent:"NORMAL",grey:"NORMAL",lightgrey:"NORMAL",white:"NORMAL",link:"NORMAL"}[n]??"BRAND",text:s??"Confirm",action:a,base:!0,loading:"confirm"},c?{color:"BRAND",text:c,action:l,base:!1,loading:"cancel"}:x,h?{color:"BRAND",text:h,action:R,base:!1,loading:"secondaryConfirm"}:x].filter(function(p){return p!==x});return e.React.createElement(e.ReactNative.View,{style:I.container},e.React.createElement(e.ReactNative.View,{style:I.textContent},e.React.createElement(w,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},i),r?e.React.createElement(e.ReactNative.View,{style:{padding:0}},r):e.React.createElement(w,{variant:"text-md/semibold",color:"TEXT_NORMAL"},o)),e.React.createElement(e.ReactNative.View,{style:I.actions},ne.map(function(p){return e.React.createElement(G,{color:p.color,label:p.text,disabled:p.base&&d,loading:C[p.loading],onPress:async function(){S({...C,[p.loading]:!0}),"action"in p&&u?(await p.action().catch(function(){}),S({...C,[p.loading]:!1})):(p.action?.(),z.close())}})})))}const{Stack:_,TextInput:X,ScrollView:j}=b.Forms,{Button:N}=b.General;function K(t){let{initialValue:i="",onConfirm:o,title:r}=t;const[n,s]=e.React.useState(i),[a,d]=e.React.useState(""),[c,l]=e.React.useState(!1),h=function(u){return/^\d+$/.test(u)};function R(){if(!h(n)){d("Please enter a valid Discord User ID (numbers only)");return}l(!0),o(n),l(!1)}return e.React.createElement(Y,{onConfirm:R,title:r},e.React.createElement(_,{style:{marginTop:-12}},e.React.createElement(X,{autoFocus:!0,isClearable:!0,value:n,onChange:function(u){s(u),a&&d("")},returnKeyType:"done",onSubmitEditing:R,state:a?"error":void 0,errorMessage:a||void 0,keyboardType:"numeric"}),e.React.createElement(j,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:{gap:8}},e.React.createElement(N,{size:"sm",variant:"tertiary",text:"Import from clipboard",icon:P.getAssetIDByName("ic_clipboard"),onPress:function(){return e.clipboard.getString().then(function(u){return s(u)})}}))),e.React.createElement(_,null,e.React.createElement(N,{loading:c,text:"Confirm",variant:"primary",disabled:!n,onPress:R}),e.React.createElement(N,{disabled:c,text:"Cancel",variant:"secondary"})))}const{openLazy:W,hideActionSheet:re}=f.findByProps("openLazy","hideActionSheet");function T(t,i){try{W(new Promise(function(o){return o({default:t})}),"ActionSheet",i)}catch(o){A.logger.error(o.stack),F.showToast("Got error when opening ActionSheet! Please check debug logs")}}const v={toInt(t){return t=t.replace(/^#/,""),parseInt(t,16)},toHex(t){return"#"+t.toString(16).toUpperCase()},HSLtoHEX(t,i,o){o/=100;const r=i*Math.min(o,1-o)/100,n=function(s){const a=(s+t/30)%12,d=o-r*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*d).toString(16).padStart(2,"0")};return`#${n(0)}${n(8)}${n(4)}`}},{FormText:ae,FormInput:oe,FormRow:q}=b.Forms,{Button:ie,View:J,TouchableOpacity:Q,Image:Z}=b.General;f.findByProps("pushModal","popModal");const L=f.findByName("CustomColorPickerActionSheet");function ee(){const t=y.storage.colors?.entries||[],i=function(r,n){T(K,{title:"Edit User ID",initialValue:r.userId,onConfirm:function(s){const a=[...t];a[n]={...r,userId:s},y.storage.colors={entries:a},g.toasts.showToast("User ID updated!")}})},o=function(){k.showInputAlert({title:"Enter User ID",confirmText:"Save",cancelText:"Cancel",placeholder:"Type here...",onConfirm:function(r){T(L,{color:v.toInt("#000000"),title:"Select Color",onSelect:function(n){const s=v.toHex(n),a=t||[];a.push({userId:r,color:s}),y.storage.colors={entries:a},g.toasts.showToast("Color entry added!")}})}})};return e.React.createElement(e.React.Fragment,null,t.map(function(r,n){return e.React.createElement(q,{key:n,label:`User ID: ${r.userId}`,subLabel:"Tap to change color",onPress:function(){T(L,{color:v.toInt(r.color),title:"Select Color",onSelect:function(s){const a=v.toHex(s),d=[...t];d[n]={...r,color:a},y.storage.colors={entries:d},g.toasts.showToast("Color updated!")}})},onLongPress:function(){return i(r,n)},trailing:e.React.createElement(J,{style:{width:24,height:24,borderRadius:12,backgroundColor:r.color,borderWidth:1,borderColor:g.semanticColors.BACKGROUND_SECONDARY}})})}),e.React.createElement(Q,{style:$.fab,onPress:o},e.React.createElement(Z,{source:P.getAssetIDByName("ic_add_24px"),style:$.fabIcon})))}const $=e.stylesheet.createThemedStyleSheet({fab:{position:"absolute",bottom:20,right:20,backgroundColor:g.semanticColors.BACKGROUND_SECONDARY,borderRadius:50,width:56,height:56,justifyContent:"center",alignItems:"center",elevation:6},fabIcon:{width:24,height:24,tintColor:"white"}});var te={onLoad:function(){y.storage.colors=y.storage.colors??{entries:[]},A.logger.log("Hello world!")},onUnload:function(){A.logger.log("Goodbye, world.")},settings:ee};return E.default=te,Object.defineProperty(E,"__esModule",{value:!0}),E})({},vendetta,vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts);
