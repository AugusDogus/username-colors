(function(A,a,u,h,i,d,E,f,C,y,x){"use strict";const B=h.findByProps("ActionSheet")?.ActionSheet??h.find(function(e){return e.render?.name==="ActionSheet"}),{ActionSheetTitleHeader:N,ActionSheetCloseButton:M}=h.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton"),k=h.findByProps("openLazy","hideActionSheet"),{openLazy:R,hideActionSheet:S}=k;function m(e,o){try{R(new Promise(function(t){return t({default:e})}),"ActionSheet",o)}catch(t){a.logger.error(t.stack),y.showToast("Got error when opening ActionSheet! Please check debug logs")}}h.findByProps("showSimpleActionSheet");const b=function(e){let{title:o,onClose:t,children:s}=e;return React.createElement(B,null,React.createElement(N,{title:o,trailing:React.createElement(M,{onPress:t??function(){return S()}})}),React.createElement(i.ReactNative.View,null,s))};b.open=function(e,o){R(new Promise(function(t){return t({default:e})}),"ActionSheet",o)};const g={toInt(e){return e=e.replace(/^#/,""),parseInt(e,16)},toHex(e){return"#"+e.toString(16).toUpperCase()},HSLtoHEX(e,o,t){t/=100;const s=o*Math.min(t,1-t)/100,n=function(r){const c=(r+e/30)%12,l=t-s*Math.max(Math.min(c-3,9-c,1),-1);return Math.round(255*l).toString(16).padStart(2,"0")};return`#${n(0)}${n(8)}${n(4)}`}},{FormRow:p}=C.Forms,{Text:v}=C.General,U=h.findByName("CustomColorPickerActionSheet"),w=i.stylesheet.createThemedStyleSheet({wompwomp:{flexDirection:"column",gap:8},destructiveIcon:{tintColor:d.semanticColors.TEXT_DANGER},destructiveText:{color:d.semanticColors.TEXT_DANGER,fontWeight:"bold"}});function H(e){let{entry:o,index:t,entries:s,setEntries:n}=e;return React.createElement(b,{title:"Message Actions"},React.createElement(p,{label:"Modify User ID",onPress:function(){E.showInputAlert({title:"Edit User ID",placeholder:"Enter new User ID",initialValue:o.userId,confirmText:"Save",onConfirm:function(r){const c=[...s];c[t]={...o,userId:r},u.storage.colors={entries:c},n(c),y.showToast("User ID updated!",f.getAssetIDByName("Check")),S()}})}}),React.createElement(p,{label:"Change Color",onPress:function(){m(U,{color:g.toInt(o.color),title:"Select Color",onSelect:function(r){const c=g.toHex(r),l=[...s];l[t]={...o,color:c},u.storage.colors={entries:l},n(l),y.showToast("Color updated!",f.getAssetIDByName("Check")),S()}})}}),React.createElement(p,{label:React.createElement(v,{style:w.destructiveText},"Delete Entry"),leading:React.createElement(p.Icon,{style:w.destructiveIcon,source:f.getAssetIDByName("ic_trash_24px")}),onPress:function(){const r=s.filter(function(c,l){return l!==t});u.storage.colors={entries:r},n(r),y.showToast("Entry deleted!",f.getAssetIDByName("Check")),S()}}))}const{FormRow:L}=C.Forms,{View:G,TouchableOpacity:$,Image:O}=C.General,T=h.findByName("CustomColorPickerActionSheet");function F(){const[e,o]=i.React.useState(u.storage.colors?.entries||[]),t=function(n,r){m(H,{entry:n,index:r,entries:e,setEntries:o})},s=function(){E.showInputAlert({title:"Enter User ID",confirmText:"Save",cancelText:"Cancel",placeholder:"Type here...",onConfirm:function(n){m(T,{color:g.toInt("#000000"),title:"Select Color",onSelect:function(r){const c=g.toHex(r),l=[...e,{userId:n,color:c}];u.storage.colors={entries:l},o(l),d.toasts.showToast("Color entry added!")}})}})};return i.React.createElement(i.React.Fragment,null,e.map(function(n,r){return i.React.createElement(L,{key:r,label:`User ID: ${n.userId}`,subLabel:"Tap to change color",onPress:function(){m(T,{color:g.toInt(n.color),title:"Select Color",onSelect:function(c){const l=g.toHex(c),I=[...e];I[r]={...n,color:l},u.storage.colors={entries:I},o(I),d.toasts.showToast("Color updated!")}})},onLongPress:function(){return t(n,r)},trailing:i.React.createElement(G,{style:{width:24,height:24,borderRadius:12,backgroundColor:n.color,borderWidth:1,borderColor:d.semanticColors.BACKGROUND_SECONDARY}})})}),i.React.createElement($,{style:D.fab,onPress:s},i.React.createElement(O,{source:f.getAssetIDByName("ic_add_24px"),style:D.fabIcon})))}const D=i.stylesheet.createThemedStyleSheet({fab:{position:"absolute",bottom:20,right:20,backgroundColor:d.semanticColors.BACKGROUND_SECONDARY,borderRadius:50,width:56,height:56,justifyContent:"center",alignItems:"center",elevation:6},fabIcon:{width:24,height:24,tintColor:"white"}});let P;function z(){try{const e=h.findByName("MessagesItemChannelContent");if(!e){a.logger.log("Could not find MessagesItemChannelContent component");return}if(!e.default){a.logger.log("MessagesItemChannelContent found but has no default export:",e);return}P=x.before("default",e,function(o){try{a.logger.log("MessagesItemChannelContent props:",o[0]);const t=o[0];t?.children&&(Array.isArray(t.children)?t.children:[t.children]).forEach(function(s,n){a.logger.log(`Child ${n} type:`,s?.type?.name||s?.type||"unknown type")})}catch(t){a.logger.log("Error in patch callback:",t)}}),a.logger.log("Successfully patched MessagesItemChannelContent")}catch(e){a.logger.log("Error while setting up patch:",e)}}var V={onLoad:function(){u.storage.colors=u.storage.colors??{entries:[]},z(),a.logger.log("Username Colors plugin loaded!")},onUnload:function(){P?.(),a.logger.log("Username Colors plugin unloaded.")},settings:F};return A.default=V,Object.defineProperty(A,"__esModule",{value:!0}),A})({},vendetta,vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,vendetta.patcher);
