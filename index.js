(function(E,A,y,f,e,g,V,w,b,F){"use strict";const D=f.findByStoreName("ThemeStore");f.findByProps("triggerHaptic");const B=f.findByProps("colors","unsafe_rawColors"),U=B?.internal??B?.meta,H=f.findByProps("TextStyleSheet").TextStyleSheet;f.findByName("Navigator")??f.findByProps("Navigator")?.Navigator,f.findByProps("getRenderCloseButton")?.getRenderCloseButton??f.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,f.findByProps("popModal","pushModal");const m=function(t,a){return D.theme!=="light"?t:a},M=function(t,a,r){const d=function(i){return i.match(/\w\w/g)?.map(function(c){return parseInt(c,16)})??[0,0,0]},n=function(i){return`#${i.map(function(c){return c.toString(16).padStart(2,"0")}).join("")}`},s=d(t),l=d(a),o=s.map(function(i,c){return Math.round(i+(l[c]-i)*r)});return n(o)};function _(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D.theme;return U.resolveSemanticColor(a,t)}function I(t){let{variant:a,lineClamp:r,color:d,align:n,style:s,onPress:l,getChildren:o,children:i,liveUpdate:c}=t;const[h,R]=e.React.useReducer(function(u){return~u},0);return e.React.useEffect(function(){if(!c)return;const u=new Date().setMilliseconds(1e3);let C;const S=setTimeout(function(){R(),C=setInterval(R,1e3)},u-Date.now());return function(){clearTimeout(S),clearInterval(C)}},[]),e.React.createElement(e.ReactNative.Text,{style:[a?H[a]:{},d?{color:_(g.semanticColors[d])}:{},n?{textAlign:n}:{},s??{}],numberOfLines:r,onPress:l},o?.()??i)}const z=e.ReactNative.Animated.createAnimatedComponent(e.ReactNative.Pressable);function G(t){let{label:a,color:r,disabled:d,loading:n,onPress:s}=t;const l={BRAND:g.rawColors.BRAND_500,DANGER:g.rawColors.RED_500,POSITIVE:g.rawColors.GREEN_500,PRIMARAY:g.rawColors.PRIMARY_500,NORMAL:g.rawColors.PRIMARY_500}[r],o=m(M(l,"#FFFFFF",.25),M(l,"#000000",.15)),i=e.stylesheet.createThemedStyleSheet({container:{alignItems:"baseline",paddingHorizontal:12,paddingVertical:10,borderRadius:2147483647},inactive:{backgroundColor:`${o}00`},active:{backgroundColor:`${o}14`}}),c=!n&&!d,[h,R]=e.React.useState(!1),u=e.React.useRef(new e.ReactNative.Animated.Value(h?1:0)).current;return e.React.useEffect(function(){e.ReactNative.Animated.timing(u,{toValue:h?1:0,duration:100,easing:e.ReactNative.Easing.linear,useNativeDriver:!0}).start()},[h]),e.React.createElement(z,{style:[i.container,c&&{backgroundColor:u.interpolate({inputRange:[0,1],outputRange:[i.inactive.backgroundColor,i.active.backgroundColor]})}],onPressIn:function(){return R(!0)},onPressOut:function(){return R(!1)},onPress:function(){return c&&s?.()},accessibilityRole:"button",accessibilityState:{disabled:!c},accessible:c,collapsable:!1,disabled:!c,pointerEvents:c?"box-only":"none"},n?e.React.createElement(e.ReactNative.ActivityIndicator,{size:"small",color:_(g.semanticColors[`TEXT_${r}`])}):e.React.createElement(I,{variant:"text-md/semibold",color:c?`TEXT_${r}`:"TEXT_MUTED"},a))}const Y=f.findByProps("openLazy","close");function X(t){let{title:a,body:r,children:d,confirmColor:n,confirmText:s,onConfirm:l,isConfirmButtonDisabled:o,cancelText:i,onCancel:c,secondaryConfirmText:h,onConfirmSecondary:R}=t;const u=o!==void 0,[C,S]=e.React.useState({confirm:!1,cancel:!1,secondaryConfirm:!1}),x=e.stylesheet.createThemedStyleSheet({container:{backgroundColor:g.semanticColors.CARD_PRIMARY_BG,borderRadius:28,flexDirection:"column",width:e.ReactNative.Dimensions.get("window").width*.85},textContent:{width:"100%",flexDirection:"column",gap:16,paddingHorizontal:24,paddingTop:24},actions:{width:"100%",flexDirection:"row-reverse",flexWrap:"wrap",gap:8,paddingLeft:8,marginRight:-24,paddingVertical:24}}),P=Symbol("empty"),oe=[{color:{brand:"BRAND",red:"DANGER",green:"POSITIVE",primary:"PRIMARY",transparent:"NORMAL",grey:"NORMAL",lightgrey:"NORMAL",white:"NORMAL",link:"NORMAL"}[n]??"BRAND",text:s??"Confirm",action:l,base:!0,loading:"confirm"},i?{color:"BRAND",text:i,action:c,base:!1,loading:"cancel"}:P,h?{color:"BRAND",text:h,action:R,base:!1,loading:"secondaryConfirm"}:P].filter(function(p){return p!==P});return e.React.createElement(e.ReactNative.View,{style:x.container},e.React.createElement(e.ReactNative.View,{style:x.textContent},e.React.createElement(I,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},a),d?e.React.createElement(e.ReactNative.View,{style:{padding:0}},d):e.React.createElement(I,{variant:"text-md/semibold",color:"TEXT_NORMAL"},r)),e.React.createElement(e.ReactNative.View,{style:x.actions},oe.map(function(p){return e.React.createElement(G,{color:p.color,label:p.text,disabled:p.base&&o,loading:C[p.loading],onPress:async function(){S({...C,[p.loading]:!0}),"action"in p&&u?(await p.action().catch(function(){}),S({...C,[p.loading]:!1})):(p.action?.(),Y.close())}})})))}const{Stack:L,TextInput:j,ScrollView:K}=b.Forms,{Button:N}=b.General;function W(t){let{initialValue:a="",onConfirm:r,title:d}=t;const[n,s]=e.React.useState(a),[l,o]=e.React.useState(""),[i,c]=e.React.useState(!1),h=function(u){return/^\d+$/.test(u)};function R(){if(!h(n)){o("Please enter a valid Discord User ID (numbers only)");return}c(!0),r(n),c(!1)}return e.React.createElement(X,{onConfirm:R,title:d},e.React.createElement(L,{style:{marginTop:-12}},e.React.createElement(j,{autoFocus:!0,isClearable:!0,value:n,onChange:function(u){s(u),l&&o("")},returnKeyType:"done",onSubmitEditing:R,state:l?"error":void 0,errorMessage:l||void 0,keyboardType:"numeric"}),e.React.createElement(K,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:{gap:8}},e.React.createElement(N,{size:"sm",variant:"tertiary",text:"Import from clipboard",icon:w.getAssetIDByName("ic_clipboard"),onPress:function(){return e.clipboard.getString().then(function(u){return s(u)})}}))),e.React.createElement(L,null,e.React.createElement(N,{loading:i,text:"Confirm",variant:"primary",disabled:!n,onPress:R}),e.React.createElement(N,{disabled:i,text:"Cancel",variant:"secondary"})))}const{openLazy:q,hideActionSheet:ie}=f.findByProps("openLazy","hideActionSheet");function T(t,a){try{q(new Promise(function(r){return r({default:t})}),"ActionSheet",a)}catch(r){A.logger.error(r.stack),F.showToast("Got error when opening ActionSheet! Please check debug logs")}}const v={toInt(t){return t=t.replace(/^#/,""),parseInt(t,16)},toHex(t){return"#"+t.toString(16).toUpperCase()},HSLtoHEX(t,a,r){r/=100;const d=a*Math.min(r,1-r)/100,n=function(s){const l=(s+t/30)%12,o=r-d*Math.max(Math.min(l-3,9-l,1),-1);return Math.round(255*o).toString(16).padStart(2,"0")};return`#${n(0)}${n(8)}${n(4)}`}},{FormText:le,FormInput:J,FormRow:Q}=b.Forms,{Button:Z,View:O,TouchableOpacity:ee,Image:te}=b.General;f.findByProps("pushModal","popModal");const $=f.findByName("CustomColorPickerActionSheet"),ne=function(t){const[a,r]=e.React.useState("");return e.React.createElement(O,null,e.React.createElement(J,{value:a,onChange:r,placeholder:"Type here..."}),e.React.createElement(Z,{size:"sm",variant:"tertiary",text:"Import from clipboard",icon:w.getAssetIDByName("ic_clipboard"),onPress:function(){return e.clipboard.getString().then(function(d){return r(d)})},style:{marginTop:8}}))};function re(){const[t,a]=e.React.useState(y.storage.colors?.entries||[]),r=function(n,s){T(W,{title:"Edit User ID",initialValue:n.userId,onConfirm:function(l){const o=[...t];o[s]={...n,userId:l},y.storage.colors={entries:o},a(o),g.toasts.showToast("User ID updated!")}})},d=function(){V.showCustomAlert(ne,{title:"Enter User ID",confirmText:"Save",cancelText:"Cancel",onConfirm:function(n){T($,{color:v.toInt("#000000"),title:"Select Color",onSelect:function(s){const l=v.toHex(s),o=[...t,{userId:n,color:l}];y.storage.colors={entries:o},a(o),g.toasts.showToast("Color entry added!")}})}})};return e.React.createElement(e.React.Fragment,null,t.map(function(n,s){return e.React.createElement(Q,{key:s,label:`User ID: ${n.userId}`,subLabel:"Tap to change color",onPress:function(){T($,{color:v.toInt(n.color),title:"Select Color",onSelect:function(l){const o=v.toHex(l),i=[...t];i[s]={...n,color:o},y.storage.colors={entries:i},a(i),g.toasts.showToast("Color updated!")}})},onLongPress:function(){return r(n,s)},trailing:e.React.createElement(O,{style:{width:24,height:24,borderRadius:12,backgroundColor:n.color,borderWidth:1,borderColor:g.semanticColors.BACKGROUND_SECONDARY}})})}),e.React.createElement(ee,{style:k.fab,onPress:d},e.React.createElement(te,{source:w.getAssetIDByName("ic_add_24px"),style:k.fabIcon})))}const k=e.stylesheet.createThemedStyleSheet({fab:{position:"absolute",bottom:20,right:20,backgroundColor:g.semanticColors.BACKGROUND_SECONDARY,borderRadius:50,width:56,height:56,justifyContent:"center",alignItems:"center",elevation:6},fabIcon:{width:24,height:24,tintColor:"white"}});var ae={onLoad:function(){y.storage.colors=y.storage.colors??{entries:[]},A.logger.log("Hello world!")},onUnload:function(){A.logger.log("Goodbye, world.")},settings:re};return E.default=ae,Object.defineProperty(E,"__esModule",{value:!0}),E})({},vendetta,vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts);
