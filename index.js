(function(A,i,d,a,s,h,T,f,S,y,P){"use strict";const B=a.findByProps("ActionSheet")?.ActionSheet??a.find(function(e){return e.render?.name==="ActionSheet"}),{ActionSheetTitleHeader:N,ActionSheetCloseButton:v}=a.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton"),U=a.findByProps("openLazy","hideActionSheet"),{openLazy:I,hideActionSheet:C}=U;function p(e,t){try{I(new Promise(function(o){return o({default:e})}),"ActionSheet",t)}catch(o){i.logger.error(o.stack),y.showToast("Got error when opening ActionSheet! Please check debug logs")}}a.findByProps("showSimpleActionSheet");const R=function(e){let{title:t,onClose:o,children:u}=e;return React.createElement(B,null,React.createElement(N,{title:t,trailing:React.createElement(v,{onPress:o??function(){return C()}})}),React.createElement(s.ReactNative.View,null,u))};R.open=function(e,t){I(new Promise(function(o){return o({default:e})}),"ActionSheet",t)};const g={toInt(e){return e=e.replace(/^#/,""),parseInt(e,16)},toHex(e){return"#"+e.toString(16).toUpperCase()},HSLtoHEX(e,t,o){o/=100;const u=t*Math.min(o,1-o)/100,n=function(r){const c=(r+e/30)%12,l=o-u*Math.max(Math.min(c-3,9-c,1),-1);return Math.round(255*l).toString(16).padStart(2,"0")};return`#${n(0)}${n(8)}${n(4)}`}},{FormRow:m}=S.Forms,{Text:k}=S.General,H=a.findByName("CustomColorPickerActionSheet"),b=s.stylesheet.createThemedStyleSheet({wompwomp:{flexDirection:"column",gap:8},destructiveIcon:{tintColor:h.semanticColors.TEXT_DANGER},destructiveText:{color:h.semanticColors.TEXT_DANGER,fontWeight:"bold"}});function L(e){let{entry:t,index:o,entries:u,setEntries:n}=e;return React.createElement(R,{title:"Message Actions"},React.createElement(m,{label:"Modify User ID",onPress:function(){T.showInputAlert({title:"Edit User ID",placeholder:"Enter new User ID",initialValue:t.userId,confirmText:"Save",onConfirm:function(r){const c=[...u];c[o]={...t,userId:r},d.storage.colors={entries:c},n(c),y.showToast("User ID updated!",f.getAssetIDByName("Check")),C()}})}}),React.createElement(m,{label:"Change Color",onPress:function(){p(H,{color:g.toInt(t.color),title:"Select Color",onSelect:function(r){const c=g.toHex(r),l=[...u];l[o]={...t,color:c},d.storage.colors={entries:l},n(l),y.showToast("Color updated!",f.getAssetIDByName("Check")),C()}})}}),React.createElement(m,{label:React.createElement(k,{style:b.destructiveText},"Delete Entry"),leading:React.createElement(m.Icon,{style:b.destructiveIcon,source:f.getAssetIDByName("ic_trash_24px")}),onPress:function(){const r=u.filter(function(c,l){return l!==o});d.storage.colors={entries:r},n(r),y.showToast("Entry deleted!",f.getAssetIDByName("Check")),C()}}))}const{FormRow:M}=S.Forms,{View:G,TouchableOpacity:O,Image:$}=S.General,w=a.findByName("CustomColorPickerActionSheet");function F(){const[e,t]=s.React.useState(d.storage.colors?.entries||[]),o=function(n,r){p(L,{entry:n,index:r,entries:e,setEntries:t})},u=function(){T.showInputAlert({title:"Enter User ID",confirmText:"Save",cancelText:"Cancel",placeholder:"Type here...",onConfirm:function(n){p(w,{color:g.toInt("#000000"),title:"Select Color",onSelect:function(r){const c=g.toHex(r),l=[...e,{userId:n,color:c}];d.storage.colors={entries:l},t(l),h.toasts.showToast("Color entry added!")}})}})};return s.React.createElement(s.React.Fragment,null,e.map(function(n,r){return s.React.createElement(M,{key:r,label:`User ID: ${n.userId}`,subLabel:"Tap to change color",onPress:function(){p(w,{color:g.toInt(n.color),title:"Select Color",onSelect:function(c){const l=g.toHex(c),E=[...e];E[r]={...n,color:l},d.storage.colors={entries:E},t(E),h.toasts.showToast("Color updated!")}})},onLongPress:function(){return o(n,r)},trailing:s.React.createElement(G,{style:{width:24,height:24,borderRadius:12,backgroundColor:n.color,borderWidth:1,borderColor:h.semanticColors.BACKGROUND_SECONDARY}})})}),s.React.createElement(O,{style:D.fab,onPress:u},s.React.createElement($,{source:f.getAssetIDByName("ic_add_24px"),style:D.fabIcon})))}const D=s.stylesheet.createThemedStyleSheet({fab:{position:"absolute",bottom:20,right:20,backgroundColor:h.semanticColors.BACKGROUND_SECONDARY,borderRadius:50,width:56,height:56,justifyContent:"center",alignItems:"center",elevation:6},fabIcon:{width:24,height:24,tintColor:"white"}});let x;function z(){try{const e=a.findByName("Text")||a.findByDisplayName("Text");if(!e){i.logger.log("Could not find Text component");return}x=P.before("default",e,function(t){try{t[0]?.children&&(i.logger.log("Text content:",t[0].children),i.logger.log("Text props:",t[0]))}catch(o){i.logger.log("Error in patch callback:",o)}}),i.logger.log("Successfully patched Text component")}catch(e){i.logger.log("Error while setting up patch:",e)}}var V={onLoad:function(){d.storage.colors=d.storage.colors??{entries:[]},z(),i.logger.log("Username Colors plugin loaded!")},onUnload:function(){x?.(),i.logger.log("Username Colors plugin unloaded.")},settings:F};return A.default=V,Object.defineProperty(A,"__esModule",{value:!0}),A})({},vendetta,vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,vendetta.patcher);
