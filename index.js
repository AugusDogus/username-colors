(function(m,E,l,d,i,u,R,f,g,S){"use strict";const v=d.findByProps("ActionSheet")?.ActionSheet??d.find(function(e){return e.render?.name==="ActionSheet"}),{ActionSheetTitleHeader:P,ActionSheetCloseButton:x}=d.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton"),B=d.findByProps("openLazy","hideActionSheet"),{openLazy:p,hideActionSheet:C}=B;function y(e,n){try{p(new Promise(function(t){return t({default:e})}),"ActionSheet",n)}catch(t){E.logger.error(t.stack),S.showToast("Got error when opening ActionSheet! Please check debug logs")}}d.findByProps("showSimpleActionSheet");const w=function(e){let{title:n,onClose:t,children:a}=e;return React.createElement(v,null,React.createElement(P,{title:n,trailing:React.createElement(x,{onPress:t??function(){return C()}})}),React.createElement(i.ReactNative.View,null,a))};w.open=function(e,n){p(new Promise(function(t){return t({default:e})}),"ActionSheet",n)};const h={toInt(e){return e=e.replace(/^#/,""),parseInt(e,16)},toHex(e){return"#"+e.toString(16).toUpperCase()},HSLtoHEX(e,n,t){t/=100;const a=n*Math.min(t,1-t)/100,o=function(r){const c=(r+e/30)%12,s=t-a*Math.max(Math.min(c-3,9-c,1),-1);return Math.round(255*s).toString(16).padStart(2,"0")};return`#${o(0)}${o(8)}${o(4)}`}},{FormRow:A}=g.Forms,{Text:N}=g.General,k=d.findByName("CustomColorPickerActionSheet"),T=i.stylesheet.createThemedStyleSheet({wompwomp:{flexDirection:"column",gap:8},destructiveIcon:{tintColor:u.semanticColors.TEXT_DANGER},destructiveText:{color:u.semanticColors.TEXT_DANGER,fontWeight:"bold"}});function U(e){let{entry:n,index:t,entries:a,setEntries:o}=e;return React.createElement(w,{title:"Message Actions"},React.createElement(A,{label:"Modify User ID",onPress:function(){R.showInputAlert({title:"Edit User ID",placeholder:"Enter new User ID",initialValue:n.userId,confirmText:"Save",onConfirm:function(r){const c=[...a];c[t]={...n,userId:r},l.storage.colors={entries:c},o(c),S.showToast("User ID updated!",f.getAssetIDByName("Check")),C()}})}}),React.createElement(A,{label:"Change Color",onPress:function(){y(k,{color:h.toInt(n.color),title:"Select Color",onSelect:function(r){const c=h.toHex(r),s=[...a];s[t]={...n,color:c},l.storage.colors={entries:s},o(s),S.showToast("Color updated!",f.getAssetIDByName("Check")),C()}})}}),React.createElement(A,{label:React.createElement(N,{style:T.destructiveText},"Delete Entry"),leading:React.createElement(A.Icon,{style:T.destructiveIcon,source:f.getAssetIDByName("ic_trash_24px")}),onPress:function(){const r=a.filter(function(c,s){return s!==t});l.storage.colors={entries:r},o(r),S.showToast("Entry deleted!",f.getAssetIDByName("Check")),C()}}))}const{FormRow:H}=g.Forms,{View:G,TouchableOpacity:L,Image:_}=g.General,b=d.findByName("CustomColorPickerActionSheet");function M(){const[e,n]=i.React.useState(l.storage.colors?.entries||[]),t=function(o,r){y(U,{entry:o,index:r,entries:e,setEntries:n})},a=function(){R.showInputAlert({title:"Enter User ID",confirmText:"Save",cancelText:"Cancel",placeholder:"Type here...",onConfirm:function(o){y(b,{color:h.toInt("#000000"),title:"Select Color",onSelect:function(r){const c=h.toHex(r),s=[...e,{userId:o,color:c}];l.storage.colors={entries:s},n(s),u.toasts.showToast("Color entry added!")}})}})};return i.React.createElement(i.React.Fragment,null,e.map(function(o,r){return i.React.createElement(H,{key:r,label:`User ID: ${o.userId}`,subLabel:"Tap to change color",onPress:function(){y(b,{color:h.toInt(o.color),title:"Select Color",onSelect:function(c){const s=h.toHex(c),I=[...e];I[r]={...o,color:s},l.storage.colors={entries:I},n(I),u.toasts.showToast("Color updated!")}})},onLongPress:function(){return t(o,r)},trailing:i.React.createElement(G,{style:{width:24,height:24,borderRadius:12,backgroundColor:o.color,borderWidth:1,borderColor:u.semanticColors.BACKGROUND_SECONDARY}})})}),i.React.createElement(L,{style:D.fab,onPress:a},i.React.createElement(_,{source:f.getAssetIDByName("ic_add_24px"),style:D.fabIcon})))}const D=i.stylesheet.createThemedStyleSheet({fab:{position:"absolute",bottom:20,right:20,backgroundColor:u.semanticColors.BACKGROUND_SECONDARY,borderRadius:50,width:56,height:56,justifyContent:"center",alignItems:"center",elevation:6},fabIcon:{width:24,height:24,tintColor:"white"}});var O={onLoad:function(){l.storage.colors=l.storage.colors??{entries:[]},E.logger.log("Hello world!")},onUnload:function(){E.logger.log("Goodbye, world.")},settings:M};return m.default=O,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta,vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts);
